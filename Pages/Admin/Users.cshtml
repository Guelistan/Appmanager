@page "/Users"
@model AppManager.Pages.Admin.UsersModel
@{

    <h2>Benutzer hinzufügen</h2>
    <form method="post">
        <div>
            <label>Benutzername:</label>
            <input asp-for="NewUser.UserName" class="form-control" />
            <span asp-validation-for="NewUser.UserName" class="text-danger"></span>
        </div>
        <div>
            <label>Email:</label>
            <input asp-for="NewUser.Email" class="form-control" />
            <span asp-validation-for="NewUser.Email" class="text-danger"></span>
        </div>
        <div>
            <label>Aktiv:</label>
            <input asp-for="NewUser.IsActive" type="checkbox" />
        </div>
        <button type="submit" class="btn btn-primary">Hinzufügen</button>
    </form>

    <hr />
    <h2>Benutzerliste</h2>
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Aktiv</th>
                <th>Aktion</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                <tr>
                    <td>@user.Id</td>
                    <td>@user.UserName</td>
                    <td>@user.Email</td>
                    <td>@(user.IsActive ? "Ja" : "Nein")</td>
                    <td>
                        <!-- Bearbeiten-Formular -->
                        <form method="post" asp-page-handler="Edit">
                            <input type="hidden" name="EditUser.Id" value="@user.Id" />
                            <input type="text" name="EditUser.UserName" value="@user.UserName" />
                            <input type="email" name="EditUser.Email" value="@user.Email" />
                            <input type="checkbox" name="EditUser.IsActive" @(user.IsActive ? "checked" : "") />
                            <button type="submit">Speichern</button>
                        </form>

                        <!-- Löschen-Formular -->
                        <form method="post" asp-page-handler="Delete" asp-route-id="@user.Id" style="display:inline">
                            <button type="submit" class="btn btn-danger btn-sm mt-1">Löschen</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    @section Scripts {
        <partial name="_ValidationScriptsPartial" />
    }
}
